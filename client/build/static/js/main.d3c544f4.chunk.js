(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{117:function(e,t,n){},118:function(e,t,n){},140:function(e,t,n){},142:function(e,t,n){"use strict";n.r(t);var c=n(1),s=n(0),a=n.n(s),r=n(66),i=n.n(r),o=(n(76),n(77),n(7)),l=n(2),j=n(18);n(78);var u=function(){var e=Object(s.useState)(""),t=Object(o.a)(e,2),n=t[0],a=t[1],r=Object(s.useState)(""),i=Object(o.a)(r,2),u=i[0],m=i[1];return Object(l.f)(),Object(c.jsxs)("div",{className:"joinOuterContainer",children:[Object(c.jsx)("div",{className:"info",children:"This is sample information"}),Object(c.jsxs)("div",{className:"formWrapper",children:[Object(c.jsxs)("div",{className:"joinInnerContainer",children:[Object(c.jsx)("h1",{className:"heading",children:"Create Room"}),Object(c.jsxs)("div",{className:"form",children:[Object(c.jsx)("input",{placeholder:"Name",className:"joinInput leftInput",type:"text",onChange:function(e){return a(e.target.value)}}),Object(c.jsx)("input",{placeholder:"Room",className:"joinInput rightInput",type:"text",onChange:function(e){return m(e.target.value)}})]}),Object(c.jsx)(j.b,{onClick:function(e){return n&&u?null:e.preventDefault()},to:{pathname:"/chat",search:"?name=".concat(n,"&room=").concat(u),state:{isCreate:!0}},children:Object(c.jsx)("button",{className:"button mt-20",type:"submit",children:"Create and join"})})]}),Object(c.jsxs)("div",{className:"joinInnerContainer",children:[Object(c.jsx)("h1",{className:"heading",children:"Join Room"}),Object(c.jsxs)("div",{className:"form",children:[Object(c.jsx)("input",{placeholder:"Name",className:"joinInput leftInput",type:"text",onChange:function(e){return a(e.target.value)}}),Object(c.jsx)("input",{placeholder:"Room",className:"joinInput rightInput",type:"text",onChange:function(e){return m(e.target.value)}})]}),Object(c.jsx)(j.b,{onClick:function(e){return n&&u?null:e.preventDefault()},to:{pathname:"/chat",search:"?name=".concat(n,"&room=").concat(u),state:{isCreate:!1}},children:Object(c.jsx)("button",{className:"button mt-20",type:"submit",children:"Join"})})]})]})]})},m=n(39),b=n(68),O=n.n(b),d=n(69),h=n.n(d);n(117),n(118);var f=function(e){var t=e.room,n=e.usersOnline;return Object(c.jsxs)("div",{className:"container left",children:[Object(c.jsxs)("div",{className:"leftTitle",children:["Room:",t]}),Object(c.jsx)("div",{className:"leftTitle",children:"Online Users"}),Object(c.jsx)("ul",{className:"onlineList",children:n.map((function(e,t){return Object(c.jsx)("li",{children:e.name},t)}))})]})},x=n(70),v=n.n(x);n(140);var g,p=function(e){var t=e.name,n=e.message,a=e.messages,r=e.setMessage,i=e.sendMessage,l=e.usersOnline,j=Object(s.useState)(!1),u=Object(o.a)(j,2),m=u[0],b=u[1],O=function(e){var t=n.indexOf("@"),c=n.indexOf(" ",t),s=n.slice(0,t),a=c>0?n.slice(c,n.length):"";console.log(n.slice(0,t)),console.log(n.slice(c,n.length)),"@"===n[0]?r("@".concat(e.target.innerHTML," ").concat(a)):r("".concat(s," ").concat(e.target.innerHTML," ").concat(a)),console.log(e.target.innerHTML),b(!1)};return Object(c.jsxs)("div",{className:"container right",children:[Object(c.jsx)(v.a,{className:"messages",children:a.map((function(e,n){return e.user===t.toLowerCase()?Object(c.jsx)(c.Fragment,{children:Object(c.jsxs)("div",{className:"msgBox",children:[Object(c.jsx)("div",{className:"moveRight "+(e.isPrivate?"privateSender":""),children:e.text}),Object(c.jsx)("div",{className:"userNameRight",children:e.isPrivate?"Private message to ".concat(e.receiver):e.user})]},n)}):Object(c.jsx)(c.Fragment,{children:Object(c.jsxs)("div",{className:"msgBox",children:[Object(c.jsx)("div",{className:"moveLeft "+(e.isPrivate?"privateReceiver":""),children:e.text}),Object(c.jsx)("div",{className:"userNameLeft",children:e.isPrivate?"Private message from ".concat(e.user):e.user})]},n)})}))}),Object(c.jsxs)("form",{children:[m?Object(c.jsx)("ul",{className:"usersList",children:l.map((function(e,n){return e.name!==t?Object(c.jsx)("li",{onClick:O,children:e.name},n):null}))}):null,Object(c.jsx)("input",{value:n,onChange:function(e){r(e.target.value)},onKeyPress:function(e){return"Enter"===e.key?i(e):"@"===e.key?b(!0):null}}),Object(c.jsx)("button",{onClick:function(e){return i(e)},children:"Send"})]})]})};var N=function(){var e=Object(s.useState)(""),t=Object(o.a)(e,2),n=t[0],a=t[1],r=Object(s.useState)(""),i=Object(o.a)(r,2),j=i[0],u=i[1],b=Object(s.useState)(""),d=Object(o.a)(b,2),x=d[0],v=d[1],N=Object(s.useState)([]),C=Object(o.a)(N,2),I=C[0],M=C[1],S=Object(s.useState)([]),y=Object(o.a)(S,2),k=y[0],L=y[1],R=Object(l.f)(),P=Object(l.g)(),T="localhost:5000";return Object(s.useEffect)((function(){var e=O.a.parse(P.search),t=e.room,n=e.name,c=P.state.isCreate;return g=h()(T),a(n),u(t),g.emit("join",{name:n,room:t,isCreate:c},(function(e){e&&(alert(e),R.push("/"))})),function(){g.close()}}),[T,P.search]),Object(s.useEffect)((function(){g.on("message",(function(e){M((function(t){return[].concat(Object(m.a)(t),[e])}))})),g.on("roomData",(function(e){L(e.users)})),g.on("privateMessage",(function(e){M((function(t){return[].concat(Object(m.a)(t),[e])}))}))}),[]),console.log(I),Object(c.jsxs)("div",{className:"outerContainer",children:[Object(c.jsx)(f,{room:j,usersOnline:k}),Object(c.jsx)(p,{usersOnline:k,name:n,messages:I,message:x,setMessage:v,sendMessage:function(e){if(e.preventDefault(),x)if(console.log(x),console.log(x[0]),"@"===x[0]){var t=x.indexOf(" "),n=k.find((function(e){return e.name===x.slice(1,t)}));g.emit("privateMessage",{message:x.slice(t,x.length),user:n},(function(){return v("")}))}else g.emit("sendMessage",x,(function(){return v("")}))}})]})};var C=function(){return Object(c.jsx)(j.a,{children:Object(c.jsxs)(l.c,{children:[Object(c.jsx)(l.a,{path:"/",exact:!0,children:Object(c.jsx)(u,{})}),Object(c.jsx)(l.a,{path:"/chat",children:Object(c.jsx)(N,{})})]})})};i.a.render(Object(c.jsx)(a.a.StrictMode,{children:Object(c.jsx)(C,{})}),document.getElementById("root"))},76:function(e,t,n){},77:function(e,t,n){},78:function(e,t,n){}},[[142,1,2]]]);
//# sourceMappingURL=main.d3c544f4.chunk.js.map
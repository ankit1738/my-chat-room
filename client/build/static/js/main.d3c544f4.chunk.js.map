{"version":3,"sources":["components/Join/index.js","components/Sidebar/index.js","components/Chatbar/index.js","components/Chat/index.js","App.js","index.js"],"names":["Join","useState","name","setName","room","setRoom","useHistory","className","placeholder","type","onChange","event","target","value","onClick","e","preventDefault","to","pathname","search","state","isCreate","Sidebar","usersOnline","map","user","index","Chatbar","socket","message","messages","setMessage","sendMessage","open","setOpen","handleClick","pos","indexOf","pos2","prefix","slice","suffix","length","console","log","innerHTML","toLowerCase","isPrivate","text","receiver","users","onKeyPress","key","Chat","setMessages","setUsersOnline","history","location","useLocation","SERVER","useEffect","queryString","parse","io","emit","error","alert","push","close","on","previous","data","find","App","path","exact","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.d3c544f4.chunk.js","sourcesContent":["import React, { useState } from \"react\";\nimport { Link, useHistory } from \"react-router-dom\";\nimport \"./join.css\";\n\nfunction Join() {\n    const [name, setName] = useState(\"\");\n    const [room, setRoom] = useState(\"\");\n    const history = useHistory();\n\n    return (\n        <div className=\"joinOuterContainer\">\n            <div className=\"info\">This is sample information</div>\n            <div className=\"formWrapper\">\n                <div className=\"joinInnerContainer\">\n                    <h1 className=\"heading\">Create Room</h1>\n                    <div className=\"form\">\n                        <input\n                            placeholder=\"Name\"\n                            className=\"joinInput leftInput\"\n                            type=\"text\"\n                            onChange={(event) => setName(event.target.value)}\n                        />\n                        <input\n                            placeholder=\"Room\"\n                            className=\"joinInput rightInput\"\n                            type=\"text\"\n                            onChange={(event) => setRoom(event.target.value)}\n                        />\n                    </div>\n                    <Link\n                        onClick={(e) =>\n                            !name || !room ? e.preventDefault() : null\n                        }\n                        to={{\n                            pathname: `/chat`,\n                            search: `?name=${name}&room=${room}`,\n                            state: { isCreate: true },\n                        }}>\n                        <button className={\"button mt-20\"} type=\"submit\">\n                            Create and join\n                        </button>\n                    </Link>\n                </div>\n                <div className=\"joinInnerContainer\">\n                    <h1 className=\"heading\">Join Room</h1>\n                    <div className=\"form\">\n                        <input\n                            placeholder=\"Name\"\n                            className=\"joinInput leftInput\"\n                            type=\"text\"\n                            onChange={(event) => setName(event.target.value)}\n                        />\n                        <input\n                            placeholder=\"Room\"\n                            className=\"joinInput rightInput\"\n                            type=\"text\"\n                            onChange={(event) => setRoom(event.target.value)}\n                        />\n                    </div>\n                    <Link\n                        onClick={(e) =>\n                            !name || !room ? e.preventDefault() : null\n                        }\n                        to={{\n                            pathname: `/chat`,\n                            search: `?name=${name}&room=${room}`,\n                            state: { isCreate: false },\n                        }}>\n                        <button className={\"button mt-20\"} type=\"submit\">\n                            Join\n                        </button>\n                    </Link>\n                </div>\n            </div>\n        </div>\n    );\n}\n\nexport default Join;\n","import React from \"react\";\nimport \"./index.css\";\nfunction Sidebar({ room, usersOnline }) {\n    return (\n        // css classes from chat component\n        <div className=\"container left\">\n            <div className=\"leftTitle\">Room:{room}</div>\n\n            <div className=\"leftTitle\">Online Users</div>\n            <ul className=\"onlineList\">\n                {usersOnline.map((user, index) => (\n                    <li key={index}>{user.name}</li>\n                ))}\n            </ul>\n        </div>\n    );\n}\n\nexport default Sidebar;\n","import React, { useState } from \"react\";\nimport ScrollToBottom from \"react-scroll-to-bottom\";\nimport \"./index.css\";\n\nfunction Chatbar({\n    name,\n    message,\n    messages,\n    setMessage,\n    sendMessage,\n    usersOnline,\n}) {\n    const [open, setOpen] = useState(false);\n    const handleChange = (e) => {\n        setMessage(e.target.value);\n    };\n\n    const handleClick = (e) => {\n        const pos = message.indexOf(\"@\");\n        const pos2 = message.indexOf(\" \", pos);\n        const prefix = message.slice(0, pos);\n        const suffix = pos2 > 0 ? message.slice(pos2, message.length) : \"\";\n        console.log(message.slice(0, pos));\n        console.log(message.slice(pos2, message.length));\n        if (message[0] === \"@\") {\n            setMessage(`@${e.target.innerHTML} ${suffix}`);\n        } else {\n            setMessage(`${prefix} ${e.target.innerHTML} ${suffix}`);\n        }\n        console.log(e.target.innerHTML);\n        setOpen(false);\n    };\n\n    return (\n        <div className=\"container right\">\n            <ScrollToBottom className=\"messages\">\n                {messages.map((message, index) =>\n                    message.user === name.toLowerCase() ? (\n                        <>\n                            <div className=\"msgBox\" key={index}>\n                                <div\n                                    className={\n                                        \"moveRight \" +\n                                        (message.isPrivate\n                                            ? \"privateSender\"\n                                            : \"\")\n                                    }>\n                                    {message.text}\n                                </div>\n                                <div className=\"userNameRight\">\n                                    {message.isPrivate\n                                        ? `Private message to ${message.receiver}`\n                                        : message.user}\n                                </div>\n                            </div>\n                        </>\n                    ) : (\n                        <>\n                            <div className=\"msgBox\" key={index}>\n                                <div\n                                    className={\n                                        \"moveLeft \" +\n                                        (message.isPrivate\n                                            ? \"privateReceiver\"\n                                            : \"\")\n                                    }>\n                                    {message.text}\n                                </div>\n                                <div className=\"userNameLeft\">\n                                    {message.isPrivate\n                                        ? `Private message from ${message.user}`\n                                        : message.user}\n                                </div>\n                            </div>\n                        </>\n                    )\n                )}\n            </ScrollToBottom>\n            <form>\n                {open ? (\n                    <ul className=\"usersList\">\n                        {usersOnline.map((users, index) =>\n                            users.name !== name ? (\n                                <li onClick={handleClick} key={index}>\n                                    {users.name}\n                                </li>\n                            ) : null\n                        )}\n                    </ul>\n                ) : null}\n                <input\n                    value={message}\n                    onChange={handleChange}\n                    onKeyPress={(e) =>\n                        e.key === \"Enter\"\n                            ? sendMessage(e)\n                            : e.key === \"@\"\n                            ? setOpen(true)\n                            : null\n                    }\n                />\n                <button onClick={(e) => sendMessage(e)}>Send</button>\n            </form>\n        </div>\n    );\n}\n\nexport default Chatbar;\n","import React, { useState, useEffect } from \"react\";\nimport queryString from \"query-string\";\nimport io from \"socket.io-client\";\nimport \"./index.css\";\nimport { useHistory, useLocation } from \"react-router-dom\";\nimport Sidebar from \"../Sidebar\";\nimport Chatbar from \"../Chatbar\";\n\nlet socket;\n\nfunction Chat() {\n    const [name, setName] = useState(\"\");\n    const [room, setRoom] = useState(\"\");\n    const [message, setMessage] = useState(\"\");\n    const [messages, setMessages] = useState([]);\n    const [usersOnline, setUsersOnline] = useState([]);\n    const history = useHistory();\n    const location = useLocation();\n    let SERVER = \"localhost:5000\";\n\n    useEffect(() => {\n        const { room, name } = queryString.parse(location.search);\n        const isCreate = location.state.isCreate;\n\n        socket = io(SERVER);\n\n        setName(name);\n        setRoom(room);\n        socket.emit(\"join\", { name, room, isCreate }, (error) => {\n            if (error) {\n                alert(error);\n                history.push(\"/\");\n            }\n        });\n        return () => {\n            socket.close();\n        };\n    }, [SERVER, location.search]);\n\n    useEffect(() => {\n        socket.on(\"message\", (message) => {\n            setMessages((previous) => [...previous, message]);\n        });\n        socket.on(\"roomData\", (data) => {\n            setUsersOnline(data.users);\n        });\n        socket.on(\"privateMessage\", (message) => {\n            setMessages((previous) => [...previous, message]);\n        });\n    }, []);\n\n    const sendMessage = (e) => {\n        e.preventDefault();\n        if (message) {\n            console.log(message);\n            console.log(message[0]);\n            if (message[0] === \"@\") {\n                const pos = message.indexOf(\" \");\n                const user = usersOnline.find(\n                    (user) => user.name === message.slice(1, pos)\n                );\n                socket.emit(\n                    \"privateMessage\",\n                    { message: message.slice(pos, message.length), user },\n                    () => setMessage(\"\")\n                );\n            } else {\n                socket.emit(\"sendMessage\", message, () => setMessage(\"\"));\n            }\n        }\n    };\n\n    console.log(messages);\n    return (\n        <div className=\"outerContainer\">\n            <Sidebar room={room} usersOnline={usersOnline} />\n            <Chatbar\n                usersOnline={usersOnline}\n                name={name}\n                messages={messages}\n                message={message}\n                setMessage={setMessage}\n                sendMessage={sendMessage}\n            />\n        </div>\n    );\n}\n\nexport default Chat;\n","import React from \"react\";\nimport \"./App.css\";\nimport Join from \"./components/Join\";\nimport Chat from \"./components/Chat\";\nimport { BrowserRouter as Router, Route, Switch } from \"react-router-dom\";\n\nfunction App() {\n    return (\n        <Router>\n            <Switch>\n                <Route path=\"/\" exact>\n                    <Join />\n                </Route>\n                <Route path=\"/chat\">\n                    <Chat />\n                </Route>\n            </Switch>\n        </Router>\n    );\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\n\nReactDOM.render(\n    <React.StrictMode>\n        <App />\n    </React.StrictMode>,\n    document.getElementById(\"root\")\n);\n"],"sourceRoot":""}